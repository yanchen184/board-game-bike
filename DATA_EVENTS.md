# 🎲 事件系統詳細數據

## 事件系統概述

### 核心機制
- **觸發機制**：基於距離、時間、玩家行為或隨機
- **決策層級**：每個事件包含2-4層決策分支
- **結果計算**：根據角色、裝備、當前狀態計算結果
- **連鎖反應**：某些選擇會觸發後續事件

### 事件類型分類
- 🌤️ **天氣事件**：影響整體環境
- ⚙️ **機械事件**：裝備相關問題
- 🏔️ **地形事件**：路況挑戰
- 👥 **團隊事件**：隊伍內部情況
- 🎯 **策略事件**：重大決策點
- 🍀 **隨機事件**：意外驚喜或挑戰

## 一、詳細事件設計

### 1. 🏔️ 髮夾彎爬坡挑戰

**觸發條件**：
- 進入山區路段（40-60km, 140-160km, 260-280km）
- 坡度達到8%以上
- 必定觸發

**事件描述**：
前方出現連續髮夾彎陡坡，坡度達到12%，長度5公里。團隊需要決定爬坡策略。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 初始效果 |
|------|------|----------|
| A. 保持隊形 | 團隊一起慢速爬坡 | 速度-40%，體力消耗x1.5 |
| B. 自由爬坡 | 各自按能力爬坡 | 隊形解散，個人能力決定 |
| C. 推車步行 | 最保守的選擇 | 速度-70%，體力消耗x0.5 |

#### 第二層決策（基於第一層）

**若選擇A-保持隊形**：
| 選項 | 描述 | 效果計算 |
|------|------|----------|
| A1. 破風手領隊 | 破風手設定節奏 | 破風手體力-40%，其他人-25% |
| A2. 爬坡手領隊 | 發揮專長 | 全隊速度+10%，爬坡手體力-30% |
| A3. 輪流領騎 | 分擔壓力 | 平均消耗-20%，時間+5分鐘 |

**若選擇B-自由爬坡**：
| 選項 | 描述 | 效果計算 |
|------|------|----------|
| B1. 設定集合點 | 山頂等待集合 | 快者等待時間x恢復率 |
| B2. 持續前進 | 不等待 | 團隊士氣-15，可能永久分散 |
| B3. 兩兩配對 | 部分配合 | 保持50%團隊加成 |

#### 第三層結果（裝備/角色影響）

**裝備影響係數**：
- 超輕車架：時間-10%，體力消耗-15%
- 爬坡輪組：速度+8%，穩定性+20%
- 多段變速：效率+12%，可選最佳齒比

**角色特殊效果**：
- 爬坡手：觸發「山路加速」，速度不減反增
- 衝刺手：額外消耗+30%，可能需要推車
- 耐力選手：後半段速度不降

**最終結果計算**：
```javascript
爬坡時間 = 基礎時間 * (1 + 坡度係數) * 決策係數 * 角色係數 * 裝備係數
體力消耗 = 基礎消耗 * 坡度倍率 * 決策倍率 * (1 - 裝備減免)
```

---

### 2. ⚙️ 爆胎危機

**觸發條件**：
- 隨機觸發（基礎機率3%/10km）
- 路況差時機率翻倍
- 可通過裝備降低機率

**事件描述**：
「啪！」一聲脆響，[角色名]的後輪爆胎了！團隊必須立即決定如何處理。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 時間消耗 | 風險 |
|------|------|----------|------|
| A. 快速補胎 | 使用CO2快速充氣 | 3分鐘 | 可能沒補好(20%) |
| B. 完整換胎 | 更換備用內胎 | 8分鐘 | 安全可靠 |
| C. 隊友支援 | 借用隊友備胎 | 5分鐘 | 隊友失去備胎 |
| D. 繼續硬騎 | 冒險繼續 | 0分鐘 | 輪圈損壞(50%) |

#### 第二層決策

**若選擇A且失敗**：
| 選項 | 描述 | 額外時間 |
|------|------|----------|
| A1. 重新補胎 | 仔細再補一次 | +5分鐘 |
| A2. 改為換胎 | 放棄補胎 | +8分鐘 |

**若選擇D且輪圈損壞**：
| 選項 | 描述 | 後果 |
|------|------|------|
| D1. 徵用隊友車輪 | 交換輪組 | 隊友速度-20% |
| D2. 退出比賽 | 無法繼續 | 該角色退賽 |

**角色能力影響**：
- 輔助手：維修時間-30%
- 機械師背景：成功率+40%
- 團隊配合高：支援效率+50%

---

### 3. 🌤️ 突發暴雨

**觸發條件**：
- 天氣系統判定（山區40%，平地20%）
- 至少持續20分鐘
- 可通過天氣預報提前預警

**事件描述**：
天空突然烏雲密布，豆大的雨點砸下來。能見度急劇下降，路面變得濕滑。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 效果 |
|------|------|------|
| A. 穿雨衣續行 | 安全但緩慢 | 速度-25%，體溫保持 |
| B. 加速衝過去 | 試圖快速通過雨區 | 速度+10%，失溫風險60% |
| C. 尋找避雨處 | 等待雨停 | 時間+20-40分鐘，體力恢復 |

#### 第二層決策（持續效果）

**每10分鐘判定**：
| 情況 | 機率 | 效果 |
|------|------|------|
| 雨勢減小 | 30% | 恢復正常速度 |
| 持續 | 50% | 維持當前狀態 |
| 雨勢加大 | 20% | 額外速度-10% |

**若選擇B且失溫**：
| 選項 | 描述 | 效果 |
|------|------|------|
| B1. 緊急保暖 | 使用備用衣物 | 體力-20%，避免失溫 |
| B2. 硬撐 | 繼續前進 | 持續掉體力5%/10分鐘 |

**裝備影響**：
- 防水裝備：無速度懲罰
- 碟煞系統：剎車效能保持90%
- 防滑輪胎：抓地力保持85%

---

### 4. 👥 團隊士氣危機

**觸發條件**：
- 團隊士氣<50
- 有成員落後>2km
- 連續遭遇3個負面事件

**事件描述**：
隊伍氣氛低迷，有成員開始抱怨節奏太快/太慢，團隊出現分裂跡象。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 效果 |
|------|------|------|
| A. 鼓舞演說 | 隊長激勵士氣 | 士氣機率回升(領導力決定) |
| B. 休息調整 | 停下來溝通 | 時間+15分鐘，士氣+20 |
| C. 分組行動 | 各自為戰 | 團隊解散，失去團隊加成 |
| D. 強行推進 | 忽視問題 | 士氣-20，可能有人退出 |

#### 第二層效果

**若選擇A**：
- 成功率 = 隊長魅力值 + 團隊默契度
- 成功：士氣+30，獲得「團結」buff
- 失敗：士氣-10，需要其他方案

**若選擇C**：
| 後續發展 | 機率 | 結果 |
|----------|------|------|
| 重新集結 | 40% | 30km後重組，默契-20 |
| 永久分離 | 30% | 變成個人賽 |
| 部分集結 | 30% | 形成2個小隊 |

---

### 5. 🎯 補給站決策

**觸發條件**：
- 固定地點（50km, 100km, 150km, 200km, 250km, 300km）
- 必定觸發
- 可選擇跳過

**事件描述**：
前方500公尺是官方補給站，提供水、食物、維修服務。團隊需要決定補給策略。

**決策樹**：

#### 第一層決策
| 選項 | 時間 | 效果 |
|------|------|------|
| A. 完整補給 | 10分鐘 | 體力恢復40%，士氣+15 |
| B. 快速補水 | 3分鐘 | 體力恢復15%，獲得水x3 |
| C. 不停直過 | 0分鐘 | 保持節奏，體力不恢復 |
| D. 分批補給 | 5分鐘 | 部分人補給，保持隊形 |

#### 第二層選擇（若停留）

**補給內容選擇**：
| 物品 | 效果 | 數量限制 | 重量 |
|------|------|----------|------|
| 能量膠 | 瞬間恢復10%體力 | 5個 | 50g/個 |
| 運動飲料 | 持續恢復，防止抽筋 | 2瓶 | 500g/瓶 |
| 香蕉 | 恢復5%，防抽筋 | 3個 | 120g/個 |
| 能量棒 | 飽腹感，緩慢恢復 | 3個 | 60g/個 |

**維修服務**（若需要）：
| 服務 | 時間 | 效果 |
|------|------|------|
| 調整變速 | +2分鐘 | 效率+5% |
| 清潔鏈條 | +3分鐘 | 阻力-5% |
| 檢查輪胎 | +2分鐘 | 爆胎率-50% |
| 更換零件 | +5-10分鐘 | 修復損壞 |

---

### 6. 🍀 神秘贊助商

**觸發條件**：
- 隨機觸發（1%/10km）
- 表現優秀時機率提升
- 特殊日期機率翻倍

**事件描述**：
路邊一位神秘的贊助商認出了你們，願意提供特殊支援！

**決策樹**：

#### 第一層決策（選擇獎勵）
| 選項 | 獎勵內容 | 特殊效果 |
|------|----------|----------|
| A. 高級補給 | 獲得特製能量飲 | 體力瞬間滿血 |
| B. 裝備升級 | 臨時升級一件裝備 | 該裝備升級1個等級 |
| C. 情報支援 | 獲得路線情報 | 預知後續3個事件 |
| D. 現金獎勵 | 獲得現金 | 終點結算額外積分 |

#### 第二層效果

**若選擇B-裝備升級**：
- 選擇升級目標（車架/輪組/變速）
- 效果持續至比賽結束
- 可疊加原有裝備效果

**若選擇C-情報支援**：
- 顯示後續50km內所有事件
- 可提前準備應對策略
- 獲得「先知」buff：反應時間+100%

---

### 7. 🏔️ 下坡失控危險

**觸發條件**：
- 下坡路段
- 速度>60km/h
- 雨天機率翻倍

**事件描述**：
連續下坡讓速度飆升到危險程度，前方還有急彎！需要立即決定如何控制速度。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 風險 | 收益 |
|------|------|------|------|
| A. 全力剎車 | 安全第一 | 輪胎磨損 | 安全通過95% |
| B. 技術過彎 | 保持速度過彎 | 翻車30% | 時間-2分鐘 |
| C. 利用風阻 | 站起來增加風阻 | 失去平衡15% | 平穩減速 |
| D. 跟隨前車 | 跟著前方路線 | 連環碰撞20% | 獲得經驗 |

#### 第二層結果

**若選擇B失敗**：
| 後果 | 機率 | 效果 |
|------|------|------|
| 輕微摔車 | 60% | 時間+5分鐘，體力-20% |
| 嚴重摔車 | 30% | 時間+15分鐘，可能受傷 |
| 完美救回 | 10% | 獲得「車神」稱號 |

**技術判定**：
```javascript
成功率 = 基礎技術 + (角色經驗 * 10) + (裝備穩定性 * 5) - (速度 - 60)
```

---

### 8. 🎯 路線分歧點

**觸發條件**：
- 特定地點（100km, 200km）
- 必定觸發
- 影響後續路段

**事件描述**：
前方出現岔路：左邊是較短但陡峭的山路（近道），右邊是較長但平緩的濱海路。

**決策樹**：

#### 第一層決策
| 選項 | 距離 | 特點 | 適合 |
|------|------|------|------|
| A. 山路近道 | -15km | 爬升+500m | 爬坡手 |
| B. 濱海公路 | +10km | 可能逆風 | 耐力選手 |
| C. 標準路線 | 標準 | 平衡 | 全能選手 |
| D. 探索新路 | 未知 | 隨機 | 冒險者 |

#### 第二層效果

**山路近道後續**：
- 觸發2-3個爬坡事件
- 體力消耗+40%
- 時間-30分鐘（如果成功）

**濱海公路後續**：
- 風向判定（順風時間-20分，逆風時間+30分）
- 補給站+1
- 風景優美士氣+10

**探索新路結果**：
| 結果 | 機率 | 效果 |
|------|------|------|
| 發現捷徑 | 20% | 時間-45分鐘 |
| 正常路線 | 50% | 與標準相同 |
| 繞遠路 | 20% | 時間+30分鐘 |
| 迷路 | 10% | 時間+60分鐘，士氣-30 |

---

### 9. 👥 其他車隊相遇

**觸發條件**：
- 隨機（5%/20km）
- 主要路段機率更高
- 可主動觸發（追趕）

**事件描述**：
前方發現另一支車隊，他們的速度和你們相近。這是一個戰術決策點。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 效果 |
|------|------|------|
| A. 合作騎行 | 提議合併成大集團 | 風阻-10%，速度+5% |
| B. 超越 | 加速超過 | 體力-15%，士氣+20 |
| C. 跟隨 | 跟在後方 | 體力消耗-20%，學習對方 |
| D. 另闢蹊徑 | 改變路線避開 | 保持獨立，可能繞路 |

#### 第二層互動

**若選擇A-合作**：
| 對方反應 | 機率 | 結果 |
|----------|------|------|
| 接受 | 60% | 形成大集團，效率提升 |
| 拒絕 | 30% | 各走各路 |
| 競爭 | 10% | 開始飆速，體力消耗+50% |

**大集團效果**：
- 人數效應：每多2人，風阻額外-5%（上限-40%）
- 輪替頻率：提高50%
- 持續時間：20-50km後自動分離

---

### 10. 🌤️ 極端高溫

**觸發條件**：
- 午後時段（12:00-15:00）
- 平地路段
- 夏季機率翻倍

**事件描述**：
氣溫飆升至38°C，柏油路面溫度超過50°C，熱浪讓人頭暈目眩。

**決策樹**：

#### 第一層決策
| 選項 | 描述 | 效果 |
|------|------|------|
| A. 降低強度 | 減速保持體力 | 速度-30%，避免中暑 |
| B. 大量補水 | 消耗所有水分 | 暫時維持，之後危險 |
| C. 冰敷降溫 | 使用冰袋降溫 | 體溫控制，消耗補給 |
| D. 尋找陰涼 | 改走樹蔭路線 | 路程+5km，溫度-5°C |

#### 第二層危機處理

**中暑風險判定**：
```javascript
中暑機率 = 基礎15% + (體力消耗率 - 50) * 0.5 + (補水不足 * 20)
```

**若發生中暑**：
| 嚴重程度 | 機率 | 處理 | 後果 |
|----------|------|------|------|
| 輕度 | 60% | 休息15分鐘 | 體力上限-20% |
| 中度 | 30% | 休息30分鐘 | 速度永久-15% |
| 重度 | 10% | 緊急送醫 | 退賽 |

---

## 二、事件連鎖系統

### 連鎖觸發機制

某些事件的選擇會影響後續事件的觸發：

| 前置事件 | 選擇 | 觸發事件 | 延遲 |
|----------|------|----------|------|
| 暴雨 | 不穿雨衣 | 失溫危機 | 20分鐘 |
| 爆胎 | 繼續硬騎 | 輪圈損壞 | 5km |
| 團隊危機 | 分組行動 | 迷路事件 | 10km |
| 高溫 | 不補水 | 中暑 | 30分鐘 |
| 下坡失控 | 摔車 | 機械故障 | 立即 |

### 事件組合效果

當多個事件同時生效時的特殊效果：

| 事件組合 | 疊加效果 | 特殊結果 |
|----------|----------|----------|
| 暴雨+下坡 | 危險度x3 | 強制減速50% |
| 高溫+爬坡 | 體力消耗x2 | 每5分鐘判定中暑 |
| 順風+下坡 | 速度+50% | 可能超速失控 |
| 團隊合作+補給站 | 效率+100% | 5分鐘完成完整補給 |

## 三、事件機率調整系統

### 基礎機率表

| 事件類型 | 基礎機率 | 觸發間隔 | 最大次數 |
|----------|----------|----------|----------|
| 天氣變化 | 10%/30km | 至少30km | 3次 |
| 機械故障 | 3%/10km | 至少20km | 5次 |
| 團隊事件 | 5%/20km | 至少40km | 4次 |
| 補給站 | 100% | 固定點 | 6次 |
| 隨機驚喜 | 1%/10km | 隨機 | 2次 |

### 動態機率調整

```javascript
// 機率調整公式
adjustedProbability = baseProbability *
  difficultyMultiplier *    // 難度係數 (0.5-2.0)
  weatherMultiplier *        // 天氣影響 (0.8-1.5)
  equipmentMultiplier *      // 裝備影響 (0.5-1.2)
  luckMultiplier            // 運氣值 (0.8-1.2)

// 保底機制
if (distanceSinceLastEvent > guaranteeDistance) {
  probability = Math.min(probability * 2, 100%)
}
```

## 四、事件應對策略指南

### 風險評估矩陣

| 事件類型 | 風險等級 | 時間影響 | 體力影響 | 建議策略 |
|----------|----------|----------|----------|----------|
| 爬坡挑戰 | 中 | +10-20分 | -30-40% | 穩健為主 |
| 爆胎 | 高 | +3-15分 | -5% | 完整修復 |
| 暴雨 | 中 | +5-30分 | -20% | 視情況定 |
| 團隊危機 | 高 | +0-30分 | -0-50% | 優先團結 |
| 極端天氣 | 極高 | +20-60分 | -40% | 保守應對 |

### 最優決策建議

**通用原則**：
1. **前期（0-30%）**：可以冒險，有時間恢復
2. **中期（30-70%）**：平衡風險與收益
3. **後期（70-100%）**：保守為主，確保完成

**角色特定策略**：
- **衝刺手**：避免爬坡消耗，保存體力到最後
- **爬坡手**：山路事件積極應對，平路保守
- **破風手**：優先保護團隊，個人犧牲
- **耐力選手**：可以承受更多風險事件

## 五、事件數據統計

### 平均影響統計

| 事件 | 平均時間影響 | 平均體力影響 | 發生頻率 |
|------|--------------|--------------|-----------|
| 爬坡 | +15分鐘 | -35% | 3次/場 |
| 機械 | +8分鐘 | -5% | 1-2次/場 |
| 天氣 | +12分鐘 | -20% | 2次/場 |
| 團隊 | +10分鐘 | -15% | 1次/場 |
| 補給 | +8分鐘 | +30% | 6次/場 |

### 事件價值計算

```javascript
// 事件價值評分（正面為正，負面為負）
eventValue =
  (timeImpact * -2) +        // 時間影響權重2
  (staminaImpact * 1.5) +    // 體力影響權重1.5
  (moraleImpact * 1) +       // 士氣影響權重1
  (specialBonus * 3)         // 特殊獎勵權重3

// 用於AI決策和玩家提示
```

## 總結

事件系統是遊戲的核心不確定性來源，提供了豐富的決策點和策略深度。每個事件都經過精心設計，確保：

1. **有意義的選擇**：沒有絕對正確的答案
2. **風險與回報平衡**：高風險伴隨高回報
3. **角色差異化**：不同角色有不同最優解
4. **重玩價值**：隨機性確保每次遊戲體驗不同

玩家需要根據當前狀況、團隊配置、剩餘路程等因素綜合考慮，做出最適合的決策。這種深度的策略思考正是遊戲的核心樂趣所在。